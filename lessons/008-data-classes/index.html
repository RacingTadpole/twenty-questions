<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Lesson 8: Data classes - Learn Python with A Twenty Questions Game</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">Learn Python with A Twenty Questions Game</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../.." class="nav-link">Home</a>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Lessons <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../001-print-and-input/" class="dropdown-item">Lesson 1: Print and Input</a>
</li>
                                    
<li>
    <a href="../002-if/" class="dropdown-item">Lesson 2: If</a>
</li>
                                    
<li>
    <a href="../003-variables/" class="dropdown-item">Lesson 3: More about Variables</a>
</li>
                                    
<li>
    <a href="../004-for-loops/" class="dropdown-item">Lesson 4: For loops</a>
</li>
                                    
<li>
    <a href="../005-while-loops/" class="dropdown-item">Lesson 5: While Loops</a>
</li>
                                    
<li>
    <a href="../006-game-loop-ideas/" class="dropdown-item">Lesson 6: Game Loop Ideas</a>
</li>
                                    
<li>
    <a href="../007-dictionaries/" class="dropdown-item">Lesson 7: Dictionaries</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active">Lesson 8: Data classes</a>
</li>
                                    
<li>
    <a href="../009-learning/" class="dropdown-item">Lesson 9: Learning new animals</a>
</li>
                                    
<li>
    <a href="../010-saving/" class="dropdown-item">Lesson 10: Saving stuff</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../007-dictionaries/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../009-learning/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#lesson-8-data-classes" class="nav-link">Lesson 8: Data classes</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#first-pass" class="nav-link">First pass</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#drop-the-numbers" class="nav-link">Drop the numbers</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#help" class="nav-link">Help!</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#or-drop-the-numbers-but-keep-the-dictionaries" class="nav-link">Or - drop the numbers but keep the dictionaries</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#is-it-a-good-idea-to-nest-the-questions" class="nav-link">Is it a good idea to nest the questions?</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="lesson-8-data-classes">Lesson 8: Data classes</h1>
<h2 id="first-pass">First pass</h2>
<p>Dictionaries are great, but it's still easy to make errors with them,
eg. what if you accidentally mistyped a key like this:</p>
<pre><code class="python">    {'number': 0, 'question': 'Does your animal fly?', 'yes': 1, 'no': 2},
    {'number': 1, 'qustion': 'Is your flying animal a bird?', 'yes': 3, 'no': 4},
</code></pre>

<p>You wouldn't know until the user hits that question, and then it would go wrong.</p>
<p>Data classes are a solution to this. We'll define one for questions and another one for answers. Here's how:</p>
<pre><code class="python">from dataclasses import dataclass

@dataclass
class Question:
    number: int
    text: str
    yes_number: int
    no_number: int

@dataclass
class Answer:
    number: int
    text: str

data = [
    Question(0, 'Does your animal fly?', 1, 2),
    Question(1, 'Is your flying animal a bird?', 3, 4),
    Question(2, 'Does your animal live underwater?', 7, 8),
    Question(3, 'Is your bird native to Australia?', 5, 6),
    Answer(4, 'fruit bat'),
    Answer(5, 'kookaburra'),
    Answer(6, 'blue jay'),
    Question(7, 'Is your animal a mammal?', 9, 10),
    Answer(8, 'wombat'),
    Answer(9, 'blue whale'),
    Answer(10, 'goldfish'),
]
</code></pre>

<p>You can write this too, which makes things clearer:</p>
<pre><code class="python">    Question(number=0, text='Does your animal fly?', yes_number=1, no_number=2),
</code></pre>

<p>To use data classes, do stuff like this:</p>
<pre><code class="python">q = Question(0, 'Does your animal fly?', 1, 2)
print(q.number)
print(q.text)
print(q)
print(isinstance(q, Question))
</code></pre>

<h2 id="drop-the-numbers">Drop the numbers</h2>
<p>Why are we using numbers to refer to questions and answers?
Let's just point to them directly, and write our questions out in a tree, like this:</p>
<pre><code class="python">from dataclasses import dataclass
from typing import Union

@dataclass
class Answer:
    text: str

@dataclass
class Question:
    text: str
    yes: Union['Question', Answer]
    no: Union['Question', Answer]

first = Question(
    'Does your animal fly?',
    yes=Question(
        'Is your flying animal a bird?',
        yes=Question(
            'Is your bird native to Australia?',
            yes=Answer('kookaburra'),
            no=Answer('blue jay'),
        ),
        no=Answer('fruit bat'),
    ),
    no=Question(
        'Does your animal live underwater?',
        yes=Question('Is your animal a mammal?',
            yes=Answer('blue whale'),
            no=Answer('gold fish'),
        ),
        no=Answer('wombat'),
    )
)
</code></pre>

<p>Note our "data" list has disappeared, and now we just have a question which contains
all the other questions and answers.</p>
<p>The loop is very straightforward now:</p>
<pre><code class="python">    current = first
    while isinstance(current, Question):
        x = input(current.text + ' ')
        if x == 'y':
            current = current.yes
        if x == 'n':
            current = current.no

    z = input('Is it a ' + current.text + '? ')
    if z == 'y':
        print('Wow, I guessed it!')
    if z == 'n':
        print('You beat me!')
</code></pre>

<p>Do you think this is an improvement?</p>
<h2 id="help">Help!</h2>
<p>There are quite a few new things in there
(like the <code>import</code>s and the <code>@dataclass</code> thing, not to mention <code>class</code>) which you might
prefer to understand before you use them. Here's a quick intro to each, which can also ignore.</p>
<h3 id="import">import</h3>
<p>One nice thing about python is there are a few basic built-in commands (like <code>print</code>, <code>input</code>, <code>if</code> etc),
and <em>everything else</em> you need to "import" to use. I think that's nice because it means if you come
across a command you've never seen before, you can go to the top of the file and see where it was
imported from, and so where it comes from. And then you can search for it.</p>
<p>Some packages (like the ones here, <code>dataclasses</code> and <code>typing</code>) are built-in to python.
But you can write your own and other people can import your code to use too.</p>
<p>We'll get into that more later.</p>
<h3 id="class-and-dataclass">class and "@dataclass"</h3>
<p>Python's built-in <code>class</code>es give you lots of flexibility to define "objects" that make sense for your program.</p>
<p>But there's a trend among programmers these days to restrict these objects to just the bare essentials,
which is what the <code>@dataclass</code> line does. It means the object only has the properties you list on it,
and they behave in the obvious way. In fact <code>@dataclass(frozen=true)</code> is even better, it means
you cannot change the object once you've created it (it's "frozen") - and that makes it easier to write
code that works.</p>
<h2 id="or-drop-the-numbers-but-keep-the-dictionaries">Or - drop the numbers but keep the dictionaries</h2>
<p>If the <code>Question</code> and <code>Answer</code> classes seem confusing, don't worry. It's perfectly fine to stick with
dictionaries. You can drop the numbers with them just the same way, and "nest" dictionaries, like this:</p>
<pre><code class="python">first = {
    'text': 'Does your animal fly?',
    'yes': {
        'text': 'Is your flying animal a bird?',
        'yes': {
            'text': 'Is your bird native to Australia?',
            'yes': 'kookaburra',
            'no': 'blue jay',
        },
        'no': 'fruit bat',
    },
    'no': {
        'text': 'Does your animal live underwater?',
        'yes': {
            'text': 'Is your animal a mammal?',
            'yes': 'blue whale',
            'no': 'gold fish',
        },
        'no': 'wombat',
    }
}
</code></pre>

<p>Here I've chosen to write the questions as dictionaries (with <code>text</code>, <code>yes</code> and <code>no</code> fields),
and the answers just as strings.</p>
<p>The loop could be:</p>
<pre><code class="python">    current = first
    while isinstance(current, dict):
        x = input(current['text'] + ' ')
        if x == 'y':
            current = current['yes']
        if x == 'n':
            current = current['no']

    x = input('Is it a ' + current + '? ')
    if x == 'y':
        print('Wow, I guessed it!')
    if x == 'n':
        print('You beat me!')
</code></pre>

<h2 id="is-it-a-good-idea-to-nest-the-questions">Is it a good idea to nest the questions?</h2>
<p>Nesting the questions in a big "tree" like this is quite neat, and it reflects the way the game works.</p>
<p>There are some downsides to doing it though, which we'll hit soon.</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
